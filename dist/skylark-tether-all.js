/**
 * skylark-tether - A version of tether that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-tether/
 * @license MIT
 */
!function(t,e){var s=e.define,require=e.require,i="function"==typeof s&&s.amd,o=!i&&"undefined"!=typeof exports;if(!i&&!s){var n={};s=e.define=function(t,e,s){"function"==typeof s?(n[t]={factory:s,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var s=e.split("/"),i=t.split("/");s.pop();for(var o=0;o<i.length;o++)"."!=i[o]&&(".."==i[o]?s.pop():s.push(i[o]));return s.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):n[t]={factory:null,resolved:!0,exports:s}},require=e.require=function(t){if(!n.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=n[t];if(!module.resolved){var s=[];module.deps.forEach(function(t){s.push(require(t))}),module.exports=module.factory.apply(e,s)||null,module.resolved=!0}return module.exports}}if(!s)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-langx-ns/_attach",[],function(){return function(t,e,s){"string"==typeof e&&(e=e.split("."));for(var i=e.length,o=t,n=0,l=e[n++];n<i;)o=o[l]=o[l]||{},l=e[n++];return o[l]=s}}),t("skylark-langx-ns/ns",["./_attach"],function(t){var e={attach:function(s,i){return t(e,s,i)}};return e}),t("skylark-langx-ns/main",["./ns"],function(t){return t}),t("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),t("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),t("skylark-tether/utils/type-check",[],function(){"use strict";return{isFunction:function(t){return"function"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:function(t){return"object"==typeof t},isString:function(t){return"string"==typeof t},isUndefined:function(t){return void 0===t}}}),t("skylark-tether/utils/classes",["./type-check"],function(t){"use strict";function e(t,e){e.split(" ").forEach(e=>{e.trim()&&t.classList.add(e)})}function s(t,e){e.split(" ").forEach(e=>{e.trim()&&t.classList.remove(e)})}return{addClass:e,getClass:function(e="",s,i){return t.isUndefined(s)||t.isUndefined(s[e])?i?`${i}-${e}`:e:!1===s[e]?"":s[e]},removeClass:s,updateClasses:function(t,i,o){o.forEach(e=>{-1===i.indexOf(e)&&t.classList.contains(e)&&s(t,e)}),i.forEach(s=>{t.classList.contains(s)||e(t,s)})}}}),t("skylark-tether/utils/deferred",[],function(){"use strict";const t=[];return{defer:function(e){t.push(e)},flush:function(){let e;for(;e=t.pop();)e()}}}),t("skylark-tether/utils/general",[],function(){"use strict";let t=null;function e(t={}){const e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(e=>{if(e)for(let s in e)({}).hasOwnProperty.call(e,s)&&(t[s]=e[s])}),t}const s=(()=>{let t=0;return()=>++t})();return{extend:e,getScrollBarSize:function(){if(t)return t;const s=document.createElement("div");s.style.width="100%",s.style.height="200px";const i=document.createElement("div");e(i.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),i.appendChild(s),document.body.appendChild(i);const o=s.offsetWidth;i.style.overflow="scroll";let n=s.offsetWidth;o===n&&(n=i.clientWidth);document.body.removeChild(i);const l=o-n;return t={width:l,height:l}},uniqueId:s}}),t("skylark-tether/utils/bounds",["./deferred","./general","./type-check"],function(t,e,s){"use strict";const i={};let o=null;function n(n,r){let a;r===document?(a=document,r=document.documentElement):a=r.ownerDocument;const h=a.documentElement,f=l(r),d=function(n){let r=o;r&&n.contains(r)||((r=document.createElement("div")).setAttribute("data-tether-id",e.uniqueId()),e.extend(r.style,{top:0,left:0,position:"absolute"}),n.appendChild(r),o=r);const a=r.getAttribute("data-tether-id");s.isUndefined(i[a])&&(i[a]=l(r),t.defer(()=>{delete i[a]}));return i[a]}(n);return f.top-=d.top,f.left-=d.left,s.isUndefined(f.width)&&(f.width=document.body.scrollWidth-f.left-f.right),s.isUndefined(f.height)&&(f.height=document.body.scrollHeight-f.top-f.bottom),f.top=f.top-h.clientTop,f.left=f.left-h.clientLeft,f.right=a.body.clientWidth-f.width-f.left,f.bottom=a.body.clientHeight-f.height-f.top,f}function l(t){let e=t.getBoundingClientRect(),s={};for(let t in e)s[t]=e[t];try{if(t.ownerDocument!==document){let{frameElement:e}=t.ownerDocument.defaultView;if(e){let t=l(e);s.top+=t.top,s.bottom+=t.top,s.left+=t.left,s.right+=t.left}}}catch(t){}return s}return{getBounds:n,getScrollHandleBounds:function(t,e){let s;const i=e.scrollTop,o=e===document.body;o?(e=document.documentElement,s={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):s=n(t,e);const l=getComputedStyle(e);let r=0;(e.scrollWidth>e.clientWidth||[l.overflow,l.overflowX].indexOf("scroll")>=0||!o)&&(r=15);const a=s.height-parseFloat(l.borderTopWidth)-parseFloat(l.borderBottomWidth)-r,h={width:15,height:.975*a*(a/e.scrollHeight),left:s.left+s.width-parseFloat(l.borderLeftWidth)-15};let f=0;a<408&&o&&(f=-11e-5*Math.pow(a,2)-.00727*a+22.58);o||(h.height=Math.max(h.height,24));const d=i/(e.scrollHeight-a);h.top=d*(a-h.height-f)+s.top+parseFloat(l.borderTopWidth),o&&(h.height=Math.max(h.height,24));return h},getVisibleBounds:function(t,e){if(e===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};{const s=n(t,e),i={height:s.height,width:s.width,top:s.top,left:s.left};return i.height=Math.min(i.height,s.height-(pageYOffset-s.top)),i.height=Math.min(i.height,s.height-(s.top+s.height-(pageYOffset+innerHeight))),i.height=Math.min(innerHeight,i.height),i.height-=2,i.width=Math.min(i.width,s.width-(pageXOffset-s.left)),i.width=Math.min(i.width,s.width-(s.left+s.width-(pageXOffset+innerWidth))),i.width=Math.min(innerWidth,i.width),i.width-=2,i.top<pageYOffset&&(i.top=pageYOffset),i.left<pageXOffset&&(i.left=pageXOffset),i}},removeUtilElements:function(t){o&&t.removeChild(o);o=null}}}),t("skylark-tether/abutment",["./utils/classes","./utils/deferred","./utils/bounds"],function(t,e,s){"use strict";return{position({top:i,left:o}){const{height:n,width:l}=this.cache("element-bounds",()=>s.getBounds(this.element)),r=this.getTargetBounds(),a=i+n,h=o+l,f=[];i<=r.bottom&&a>=r.top&&["left","right"].forEach(t=>{const e=r[t];e!==o&&e!==h||f.push(t)}),o<=r.right&&h>=r.left&&["top","bottom"].forEach(t=>{const e=r[t];e!==i&&e!==a||f.push(t)});const{classes:d,classPrefix:c}=this.options;return this.all.push(t.getClass("abutted",d,c)),["left","top","right","bottom"].forEach(e=>{this.all.push(`${t.getClass("abutted",d,c)}-${e}`)}),f.length&&this.add.push(t.getClass("abutted",d,c)),f.forEach(e=>{this.add.push(`${t.getClass("abutted",d,c)}-${e}`)}),e.defer(()=>{!1!==this.options.addTargetClasses&&t.updateClasses(this.target,this.add,this.all),t.updateClasses(this.element,this.add,this.all)}),!0}}}),t("skylark-tether/constraint",["./utils/classes","./utils/deferred","./utils/general","./utils/bounds","./utils/type-check"],function(t,e,s,i,o){"use strict";const n=["left","top","right","bottom"];function l(t,e,s){if(!s)return null;if("scrollParent"===s?s=e.scrollParents[0]:"window"===s&&(s=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),s===document&&(s=s.documentElement),!o.isUndefined(s.nodeType)){const e=s,o=i.getBounds(t,s),l=o,r=getComputedStyle(s);if(s=[l.left,l.top,o.width+l.left,o.height+l.top],e.ownerDocument!==document){let t=e.ownerDocument.defaultView;s[0]+=t.pageXOffset,s[1]+=t.pageYOffset,s[2]+=t.pageXOffset,s[3]+=t.pageYOffset}n.forEach((t,e)=>{"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?s[e]+=parseFloat(r[`border${t}Width`]):s[e]-=parseFloat(r[`border${t}Width`])})}return s}return{position({top:n,left:r,targetAttachment:a}){if(!this.options.constraints)return!0;let{height:h,width:f}=this.cache("element-bounds",()=>i.getBounds(this.bodyElement,this.element));0!==f||0!==h||o.isUndefined(this.lastSize)||({width:f,height:h}=this.lastSize);const d=this.cache("target-bounds",()=>this.getTargetBounds()),{height:c,width:p}=d,{classes:u,classPrefix:g}=this.options,m=function(e,s,i){const o=[t.getClass("pinned",e,s),t.getClass("out-of-bounds",e,s)];return i.forEach(t=>{const{outOfBoundsClass:e,pinnedClass:s}=t;e&&o.push(e),s&&o.push(s)}),o.forEach(t=>{["left","top","right","bottom"].forEach(e=>{o.push(`${t}-${e}`)})}),o}(u,g,this.options.constraints),b=[],y=s.extend({},a),C=s.extend({},this.attachment);return this.options.constraints.forEach(e=>{let s,i,{to:d,attachment:m,pin:w}=e;o.isUndefined(m)&&(m=""),m.indexOf(" ")>=0?[i,s]=m.split(" "):s=i=m;const x=l(this.bodyElement,this,d);"target"!==i&&"both"!==i||(n<x[1]&&"top"===y.top&&(n+=c,y.top="bottom"),n+h>x[3]&&"bottom"===y.top&&(n-=c,y.top="top")),"together"===i&&(n=function(t,e,s,i,o,n){"top"===t.top&&("bottom"===e.top&&n<s[1]?(n+=o,t.top="bottom",n+=i,e.top="top"):"top"===e.top&&n+i>s[3]&&n-(i-o)>=s[1]&&(n-=i-o,t.top="bottom",e.top="bottom"));"bottom"===t.top&&("top"===e.top&&n+i>s[3]?(n-=o,t.top="top",n-=i,e.top="bottom"):"bottom"===e.top&&n<s[1]&&n+(2*i-o)<=s[3]&&(n+=i-o,t.top="top",e.top="top"));"middle"===t.top&&(n+i>s[3]&&"top"===e.top?(n-=i,e.top="bottom"):n<s[1]&&"bottom"===e.top&&(n+=i,e.top="top"));return n}(y,C,x,h,c,n)),"target"!==s&&"both"!==s||(r<x[0]&&"left"===y.left&&(r+=p,y.left="right"),r+f>x[2]&&"right"===y.left&&(r-=p,y.left="left")),"together"===s&&(r=function(t,e,s,i,o,n){n<s[0]&&"left"===t.left?"right"===e.left?(n+=o,t.left="right",n+=i,e.left="left"):"left"===e.left&&(n+=o,t.left="right",n-=i,e.left="right"):n+i>s[2]&&"right"===t.left?"left"===e.left?(n-=o,t.left="left",n-=i,e.left="right"):"right"===e.left&&(n-=o,t.left="left",n+=i,e.left="left"):"center"===t.left&&(n+i>s[2]&&"left"===e.left?(n-=i,e.left="right"):n<s[0]&&"right"===e.left&&(n+=i,e.left="left"));return n}(y,C,x,f,p,r)),"element"!==i&&"both"!==i||(n<x[1]&&"bottom"===C.top&&(n+=h,C.top="top"),n+h>x[3]&&"top"===C.top&&(n-=h,C.top="bottom")),"element"!==s&&"both"!==s||(r<x[0]&&("right"===C.left?(r+=f,C.left="left"):"center"===C.left&&(r+=f/2,C.left="left")),r+f>x[2]&&("left"===C.left?(r-=f,C.left="right"):"center"===C.left&&(r-=f/2,C.left="right"))),o.isString(w)?w=w.split(",").map(t=>t.trim()):!0===w&&(w=["top","left","right","bottom"]);const v=[],E=[];if(r=function(t,e,s,i,o,n){t<e[0]&&(i.indexOf("left")>=0?(t=e[0],o.push("left")):n.push("left"));t+s>e[2]&&(i.indexOf("right")>=0?(t=e[2]-s,o.push("right")):n.push("right"));return t}(r,x,f,w=w||[],v,E),n=function(t,e,s,i,o,n){t<e[1]&&(i.indexOf("top")>=0?(t=e[1],o.push("top")):n.push("top"));t+s>e[3]&&(i.indexOf("bottom")>=0?(t=e[3]-s,o.push("bottom")):n.push("bottom"));return t}(n,x,h,w,v,E),v.length){let e;e=o.isUndefined(this.options.pinnedClass)?t.getClass("pinned",u,g):this.options.pinnedClass,b.push(e),v.forEach(t=>{b.push(`${e}-${t}`)})}!function(e,s,i,n,l){if(e.length){let r;r=o.isUndefined(l)?t.getClass("out-of-bounds",i,n):l,s.push(r),e.forEach(t=>{s.push(`${r}-${t}`)})}}(E,b,u,g,this.options.outOfBoundsClass),(v.indexOf("left")>=0||v.indexOf("right")>=0)&&(C.left=y.left=!1),(v.indexOf("top")>=0||v.indexOf("bottom")>=0)&&(C.top=y.top=!1),y.top===a.top&&y.left===a.left&&C.top===this.attachment.top&&C.left===this.attachment.left||(this.updateAttachClasses(C,y),this.trigger("update",{attachment:C,targetAttachment:y}))}),e.defer(()=>{!1!==this.options.addTargetClasses&&t.updateClasses(this.target,b,m),t.updateClasses(this.element,b,m)}),{top:n,left:r}}}}),t("skylark-tether/shift",["./utils/type-check"],function(t){"use strict";return{position({top:e,left:s}){if(!this.options.shift)return;let i,o,{shift:n}=this.options;return t.isFunction(n)&&(n=n.call(this,{top:e,left:s})),t.isString(n)?((n=n.split(" "))[1]=n[1]||n[0],[i,o]=n,i=parseFloat(i,10),o=parseFloat(o,10)):[i,o]=[n.top,n.left],{top:e+=i,left:s+=o}}}}),t("skylark-tether/evented",["./utils/type-check"],function(t){"use strict";return{Evented:class{on(e,s,i,o=!1){return t.isUndefined(this.bindings)&&(this.bindings={}),t.isUndefined(this.bindings[e])&&(this.bindings[e]=[]),this.bindings[e].push({handler:s,ctx:i,once:o}),this}once(t,e,s){return this.on(t,e,s,!0)}off(e,s){return t.isUndefined(this.bindings)||t.isUndefined(this.bindings[e])?this:(t.isUndefined(s)?delete this.bindings[e]:this.bindings[e].forEach((t,i)=>{t.handler===s&&this.bindings[e].splice(i,1)}),this)}trigger(e,...s){return!t.isUndefined(this.bindings)&&this.bindings[e]&&this.bindings[e].forEach((t,i)=>{const{ctx:o,handler:n,once:l}=t,r=o||this;n.apply(r,s),l&&this.bindings[e].splice(i,1)}),this}}}}),t("skylark-tether/utils/offset",["./type-check"],function(t){"use strict";const e={center:"center",left:"right",right:"left"},s={middle:"middle",top:"bottom",bottom:"top"},i={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"};return{addOffset:function(...e){const s={top:0,left:0};return e.forEach(({top:e,left:i})=>{t.isString(e)&&(e=parseFloat(e)),t.isString(i)&&(i=parseFloat(i)),s.top+=e,s.left+=i}),s},attachmentToOffset:function(e){let{left:s,top:o}=e;t.isUndefined(i[e.left])||(s=i[e.left]);t.isUndefined(i[e.top])||(o=i[e.top]);return{left:s,top:o}},autoToFixedAttachment:function(t,i){let{left:o,top:n}=t;"auto"===o&&(o=e[i.left]);"auto"===n&&(n=s[i.top]);return{left:o,top:n}},offsetToPx:function(e,s){t.isString(e.left)&&-1!==e.left.indexOf("%")&&(e.left=parseFloat(e.left)/100*s.width);t.isString(e.top)&&-1!==e.top.indexOf("%")&&(e.top=parseFloat(e.top)/100*s.height);return e},parseTopLeft:function(t){const[e,s]=t.split(" ");return{top:e,left:s}}}}),t("skylark-tether/utils/parents",["./type-check"],function(t){"use strict";return{getScrollParents:function(e){const s=getComputedStyle(e)||{},{position:i}=s;let o=[];if("fixed"===i)return[e];let n=e;for(;(n=n.parentNode)&&n&&1===n.nodeType;){let e;try{e=getComputedStyle(n)}catch(t){}if(t.isUndefined(e)||null===e)return o.push(n),o;const{overflow:s,overflowX:l,overflowY:r}=e;/(auto|scroll|overlay)/.test(s+r+l)&&("absolute"!==i||["relative","absolute","fixed"].indexOf(e.position)>=0)&&o.push(n)}o.push(e.ownerDocument.body),e.ownerDocument!==document&&o.push(e.ownerDocument.defaultView);return o},getOffsetParent:function(t){return t.offsetParent||document.documentElement}}}),t("skylark-tether/Tether",["skylark-langx/skylark","./abutment","./constraint","./shift","./evented","./utils/classes","./utils/deferred","./utils/general","./utils/offset","./utils/bounds","./utils/parents","./utils/type-check"],function(t,e,s,i,o,n,l,r,a,h,f,d){"use strict";const c={modules:[s,e,i]};function p(t){let e=t.ownerDocument,s=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement;return s===t}function u(t,e,s=1){return t+s>=e&&e>=t-s}const g=(()=>{if(d.isUndefined(document))return"";const t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"];for(let s=0;s<e.length;++s){const i=e[s];if(void 0!==t.style[i])return i}})(),m=[],b=()=>{m.forEach(t=>{t.position(!1)}),l.flush()};function y(){return performance.now()}(()=>{let t=null,e=null,s=null;const i=()=>{if(!d.isUndefined(e)&&e>16)return e=Math.min(e-16,250),void(s=setTimeout(i,250));!d.isUndefined(t)&&y()-t<10||(null!=s&&(clearTimeout(s),s=null),t=y(),b(),e=y()-t)};d.isUndefined(window)||d.isUndefined(window.addEventListener)||["resize","scroll","touchmove"].forEach(t=>{window.addEventListener(t,i)})})();class C extends o.Evented{constructor(t){super(),this.position=this.position.bind(this),m.push(this),this.history=[],this.setOptions(t,!1),c.modules.forEach(module=>{d.isUndefined(module.initialize)||module.initialize.call(this)}),this.position()}setOptions(t,e=!0){const s={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether",bodyElement:document.body};this.options=r.extend(s,t);let{element:i,target:o,targetModifier:n,bodyElement:l}=this.options;if(this.element=i,this.target=o,this.targetModifier=n,"string"==typeof l&&(l=document.querySelector(l)),this.bodyElement=l,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(t=>{if(d.isUndefined(this[t]))throw new Error("Tether Error: Both element and target must be defined");d.isUndefined(this[t].jquery)?d.isString(this[t])&&(this[t]=document.querySelector(this[t])):this[t]=this[t][0]}),this._addClasses(),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=a.parseTopLeft(this.options.targetAttachment),this.attachment=a.parseTopLeft(this.options.attachment),this.offset=a.parseTopLeft(this.options.offset),this.targetOffset=a.parseTopLeft(this.options.targetOffset),d.isUndefined(this.scrollParents)||this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=f.getScrollParents(this.target),!1!==this.options.enabled&&this.enable(e)}getTargetBounds(){return d.isUndefined(this.targetModifier)?h.getBounds(this.bodyElement,this.target):"visible"===this.targetModifier?h.getVisibleBounds(this.bodyElement,this.target):"scroll-handle"===this.targetModifier?h.getScrollHandleBounds(this.bodyElement,this.target):void 0}clearCache(){this._cache={}}cache(t,e){return d.isUndefined(this._cache)&&(this._cache={}),d.isUndefined(this._cache[t])&&(this._cache[t]=e.call(this)),this._cache[t]}enable(t=!0){const{classes:e,classPrefix:s}=this.options;!1!==this.options.addTargetClasses&&n.addClass(this.target,n.getClass("enabled",e,s)),n.addClass(this.element,n.getClass("enabled",e,s)),this.enabled=!0,this.scrollParents.forEach(t=>{t!==this.target.ownerDocument&&t.addEventListener("scroll",this.position)}),t&&this.position()}disable(){const{classes:t,classPrefix:e}=this.options;n.removeClass(this.target,n.getClass("enabled",t,e)),n.removeClass(this.element,n.getClass("enabled",t,e)),this.enabled=!1,d.isUndefined(this.scrollParents)||this.scrollParents.forEach(t=>{t.removeEventListener("scroll",this.position)})}destroy(){this.disable(),this._removeClasses(),m.forEach((t,e)=>{t===this&&m.splice(e,1)}),0===m.length&&h.removeUtilElements(this.bodyElement)}updateAttachClasses(t,e){t=t||this.attachment,e=e||this.targetAttachment;const{classes:s,classPrefix:i}=this.options;!d.isUndefined(this._addAttachClasses)&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),d.isUndefined(this._addAttachClasses)&&(this._addAttachClasses=[]),this.add=this._addAttachClasses,t.top&&this.add.push(`${n.getClass("element-attached",s,i)}-${t.top}`),t.left&&this.add.push(`${n.getClass("element-attached",s,i)}-${t.left}`),e.top&&this.add.push(`${n.getClass("target-attached",s,i)}-${e.top}`),e.left&&this.add.push(`${n.getClass("target-attached",s,i)}-${e.left}`),this.all=[],["left","top","bottom","right","middle","center"].forEach(t=>{this.all.push(`${n.getClass("element-attached",s,i)}-${t}`),this.all.push(`${n.getClass("target-attached",s,i)}-${t}`)}),l.defer(()=>{d.isUndefined(this._addAttachClasses)||(n.updateClasses(this.element,this._addAttachClasses,this.all),!1!==this.options.addTargetClasses&&n.updateClasses(this.target,this._addAttachClasses,this.all),delete this._addAttachClasses)})}position(t=!0){if(!this.enabled)return;this.clearCache();const e=a.autoToFixedAttachment(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,e);const s=this.cache("element-bounds",()=>h.getBounds(this.bodyElement,this.element));let{width:i,height:o}=s;0!==i||0!==o||d.isUndefined(this.lastSize)?this.lastSize={width:i,height:o}:({width:i,height:o}=this.lastSize);const n=this.cache("target-bounds",()=>this.getTargetBounds()),p=n;let u=a.offsetToPx(a.attachmentToOffset(this.attachment),{width:i,height:o}),g=a.offsetToPx(a.attachmentToOffset(e),p);const m=a.offsetToPx(this.offset,{width:i,height:o}),b=a.offsetToPx(this.targetOffset,p);u=a.addOffset(u,m),g=a.addOffset(g,b);let y,C=n.left+g.left-u.left,w=n.top+g.top-u.top;for(let t=0;t<c.modules.length;++t){const module=c.modules[t],i=module.position.call(this,{left:C,top:w,targetAttachment:e,targetPos:n,elementPos:s,offset:u,targetOffset:g,manualOffset:m,manualTargetOffset:b,scrollbarSize:y,attachment:this.attachment});if(!1===i)return!1;!d.isUndefined(i)&&d.isObject(i)&&({top:w,left:C}=i)}const x={page:{top:w,left:C},viewport:{top:w-pageYOffset,bottom:pageYOffset-w-o+innerHeight,left:C-pageXOffset,right:pageXOffset-C-i+innerWidth}};let v=this.target.ownerDocument,E=v.defaultView;if(E.innerHeight>v.documentElement.clientHeight&&(y=this.cache("scrollbar-size",r.getScrollBarSize),x.viewport.bottom-=y.height),E.innerWidth>v.documentElement.clientWidth&&(y=this.cache("scrollbar-size",r.getScrollBarSize),x.viewport.right-=y.width),-1!==["","static"].indexOf(v.body.style.position)&&-1!==["","static"].indexOf(v.body.parentElement.style.position)||(x.page.bottom=v.body.scrollHeight-w-o,x.page.right=v.body.scrollWidth-C-i),!d.isUndefined(this.options.optimizations)&&!1!==this.options.optimizations.moveElement&&d.isUndefined(this.targetModifier)){const t=this.cache("target-offsetparent",()=>f.getOffsetParent(this.target)),e=this.cache("target-offsetparent-bounds",()=>h.getBounds(this.bodyElement,t)),s=getComputedStyle(t),i=e,o={};if(["Top","Left","Bottom","Right"].forEach(t=>{o[t.toLowerCase()]=parseFloat(s[`border${t}Width`])}),e.right=v.body.scrollWidth-e.left-i.width+o.right,e.bottom=v.body.scrollHeight-e.top-i.height+o.bottom,x.page.top>=e.top+o.top&&x.page.bottom>=e.bottom&&x.page.left>=e.left+o.left&&x.page.right>=e.right){const{scrollLeft:s,scrollTop:i}=t;x.offset={top:x.page.top-e.top+i-o.top,left:x.page.left-e.left+s-o.left}}}return this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),t&&l.flush(),!0}move(t){if(d.isUndefined(this.element.parentNode))return;const e={};for(let s in t){e[s]={};for(let i in t[s]){let o=!1;for(let e=0;e<this.history.length;++e){const n=this.history[e];if(!d.isUndefined(n[s])&&!u(n[s][i],t[s][i])){o=!0;break}}o||(e[s][i]=!0)}}let s={top:"",left:"",right:"",bottom:""};const i=(t,e)=>{const i=!d.isUndefined(this.options.optimizations),o=i?this.options.optimizations.gpu:null;if(!1!==o){let i,o;t.top?(s.top=0,i=e.top):(s.bottom=0,i=-e.bottom),t.left?(s.left=0,o=e.left):(s.right=0,o=-e.right),d.isNumber(window.devicePixelRatio)&&devicePixelRatio%1==0&&(o=Math.round(o*devicePixelRatio)/devicePixelRatio,i=Math.round(i*devicePixelRatio)/devicePixelRatio),s[g]=`translateX(${o}px) translateY(${i}px)`,"msTransform"!==g&&(s[g]+=" translateZ(0)")}else t.top?s.top=`${e.top}px`:s.bottom=`${e.bottom}px`,t.left?s.left=`${e.left}px`:s.right=`${e.right}px`},o=!d.isUndefined(this.options.optimizations);let n=!0;o&&!1===this.options.optimizations.allowPositionFixed&&(n=!1);let a=!1;if((e.page.top||e.page.bottom)&&(e.page.left||e.page.right))s.position="absolute",i(e.page,t.page);else if(n&&(e.viewport.top||e.viewport.bottom)&&(e.viewport.left||e.viewport.right))s.position="fixed",i(e.viewport,t.viewport);else if(!d.isUndefined(e.offset)&&e.offset.top&&e.offset.left){s.position="absolute";const o=this.cache("target-offsetparent",()=>f.getOffsetParent(this.target));f.getOffsetParent(this.element)!==o&&l.defer(()=>{this.element.parentNode.removeChild(this.element),o.appendChild(this.element)}),i(e.offset,t.offset),a=!0}else s.position="absolute",i({top:!0,left:!0},t.page);if(!a)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{let t=!0,e=this.element.parentNode;for(;e&&1===e.nodeType&&"BODY"!==e.tagName&&!p(e);){if("static"!==getComputedStyle(e).position){t=!1;break}e=e.parentNode}t||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}const h={};let c=!1;for(let t in s){let e=s[t],i=this.element.style[t];i!==e&&(c=!0,h[t]=e)}c&&l.defer(()=>{r.extend(this.element.style,h),this.trigger("repositioned")})}_addClasses(){const{classes:t,classPrefix:e}=this.options;n.addClass(this.element,n.getClass("element",t,e)),!1!==this.options.addTargetClasses&&n.addClass(this.target,n.getClass("target",t,e))}_removeClasses(){const{classes:t,classPrefix:e}=this.options;n.removeClass(this.element,n.getClass("element",t,e)),!1!==this.options.addTargetClasses&&n.removeClass(this.target,n.getClass("target",t,e)),this.all.forEach(t=>{this.element.classList.remove(t),this.target.classList.remove(t)})}}C.modules=[],c.position=b;let w=r.extend(C,c);return w.modules.push({initialize(){const{classes:t,classPrefix:e}=this.options;this.markers={},["target","element"].forEach(s=>{const i=document.createElement("div");i.className=n.getClass(`${s}-marker`,t,e);const o=document.createElement("div");o.className=n.getClass("marker-dot",t,e),i.appendChild(o),this[s].appendChild(i),this.markers[s]={dot:o,el:i}})},position({manualOffset:t,manualTargetOffset:e}){const s={element:t,target:e};for(let t in s){const e=s[t];for(let s in e){let i=e[s];(!d.isString(i)||-1===i.indexOf("%")&&-1===i.indexOf("px"))&&(i+="px"),this.markers[t].dot.style[s]!==i&&(this.markers[t].dot.style[s]=i)}}return!0}}),t.attach("intg.Tether",w)}),t("skylark-tether/main",["./Tether"],function(t){return t}),t("skylark-tether",["skylark-tether/main"],function(t){return t})}(s),!i){var l=require("skylark-langx/skylark");o?module.exports=l:e.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-tether-all.js.map
